<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DarkBot</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <main>
        
        <div id="grid-area">
            <div id="grid">
                <div class="grid-square"> 
                    <div id="boneco"> </div>
                </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
            </div>
        </div>
        
        
        
        <div id="hud">
            <div id="button-area">
                <button class="button" id="andar" onclick="SalvareColocar(andarDirecao, 1)"></button>
                <button class="button" id="direita" onclick="SalvareColocar(virarDireita, 2)"></button>
                <button class="button" id="esquerda"onclick="SalvareColocar(virarEsquerda, 3)"></button>
                <div class="button"></div>
                <div class="button"></div>
                <div class="button"></div>
                <div class="button"></div>
                <button class="button" id="go" onclick="executarAcao()"></button>
            </div>
            <div id="function-area">
                <div class = "funcao" id="fmain">
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                    <div class="comando-main"></div>
                </div>
                <div class = "funcao" id="f1">
                    <div class="comando-f1"></div>
                    <div class="comando-f1"></div>
                    <div class="comando-f1"></div>
                    <div class="comando-f1"></div>
                    <div class="comando-f1"></div>
                    <div class="comando-f1"></div>
                    <div class="comando-f1"></div>
                    <div class="comando-f1"></div>
                </div>
                <div class = "funcao" id="f2">
                    <div class="comando-f2"></div>
                    <div class="comando-f2"></div>
                    <div class="comando-f2"></div>
                    <div class="comando-f2"></div>
                    <div class="comando-f2"></div>
                    <div class="comando-f2"></div>
                    <div class="comando-f2"></div>
                    <div class="comando-f2"></div>
                </div>
            </div>

        </div>
        
        
       
             <script>
            const area_grid = document.querySelectorAll(".grid-square");
            const coluna = 10;
            const linha = 8;


            posicao = {
                x : 3,
                y : 2
            };
            direcao = 0;
            filadamain = [];


            function andarBoneco(){
            const pos_atual = posicao.y * coluna + posicao.x;
                if(posicao.y < linha && posicao.x < coluna ){
                const boneco = document.getElementById("boneco");
                    area_grid[pos_atual].appendChild(boneco);
                }
            }

            function andarCima(){
                if(posicao.y > 0){
                    posicao.y--;
                    andarBoneco();
                }
            }
            function andarDireita(){
                if(posicao.x < coluna -1){
                    posicao.x++;
                    andarBoneco();
                }
            }
            function andarBaixo(){
                if(posicao.y < linha -1){
                    posicao.y++;
                    andarBoneco();
                }
            }
            function andarEsquerda(){
                if(posicao.x > 0){
                    posicao.x--;
                    andarBoneco();
                }
            }

            function verDirecao(){
                const boneco = document.getElementById("boneco");

                if(direcao == 0){
                    boneco.style.backgroundImage = "url('assets/placeholder/cima.png')";
                }
                if(direcao == 1){
                    boneco.style.backgroundImage = "url('assets/placeholder/direita.png')";
                }
                if(direcao == 2){
                    boneco.style.backgroundImage = "url('assets/placeholder/baixo.png')";
                }
                if(direcao == 3){
                    boneco.style.backgroundImage = "url('assets/placeholder/esquerda.png')";
                }
            }

            function andarDirecao(){

                if(direcao == 0){
                    andarCima();
                }
                if(direcao == 1){
                    andarDireita();
                }
                if(direcao == 2){
                    andarBaixo();
                }
                if(direcao == 3){
                    andarEsquerda();
                }
            }

               function virarDireita(){
                    direcao++;
                    direcao = direcao%4;
                    verDirecao();
                    
                }
                function virarEsquerda(){
                    direcao--;
                    direcao = direcao%4;
                    if(direcao < 0) direcao +=4;
                    verDirecao();
                }   

            window.onload = () => { 
                andarBoneco();
            }

            function colocaImagem(qual){
                const grid_mae = document.querySelectorAll(".comando-main");
                 const index = filadamain.length - 1;
                            
                 if (index >= 0 && index < grid_mae.length) {
                    if(qual == 1){
                     grid_mae[index].style.backgroundImage = "url('assets/botoes/frente.jpeg')";
                    }
                    else if(qual == 2){
                     grid_mae[index].style.backgroundImage = "url('assets/botoes/direita.jpeg')";
                    }
                    else if(qual == 3){
                     grid_mae[index].style.backgroundImage = "url('assets/botoes/esquerda.jpeg')";
                    }

                 } else {
        console.warn("Índice inválido:", index);
                 }
            }


            function salvarAcao (funcao){
                if(filadamain.length >= 12){
                    alert("Limite de 12 ações atingido manin");
                    return;
                    
                }

                filadamain.push(funcao);
                console.log("Ação salva:", funcao.name);


            }
            function executarAcao(){
                
                filadamain.forEach(funcao => funcao());
                filadamain = [];
            }

            function SalvareColocar(funcao, qual){
                salvarAcao(funcao);
                colocaImagem(qual);
            }
        </script>
    </main>
</body>
</html>