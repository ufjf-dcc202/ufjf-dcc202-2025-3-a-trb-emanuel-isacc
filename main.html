<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DarkBot</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <main>
        
        <div id="grid-area">
            <div id="grid">
                <div class="grid-square"> 
                    <div id="boneco">
                       o
                    </div>
                </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
                <div class="grid-square"> </div>
            </div>
        </div>
        
        
        
        <div id="hud">
            <div id="button-area">
                <button class="button"  id="andar" onclick="salvarAcao(andarDirecao)"></button>
                <button class="button" onclick="salvarAcao(virarDireita)">↱</button>
                <button class="button" onclick="salvarAcao(virarEsquerda)">↰</button>
                <div class="button"></div>
                <div class="button"></div>
                <div class="button"></div>
                <div class="button"></div>
                <button class="button" id="go" onclick="executarAcao()"></button>
            </div>
            <div id="function-area">
                <div class = "funcao" id="fmain">
                    <div class = "funcao_titulo">Main</div>
                </div>
                <div class = "funcao" id="f1">
                    <div class = "funcao_titulo">Função P1</div>
                </div>
                <div class = "funcao" id="f2">
                    <div class = "funcao_titulo">Função P2</div>
                </div>
            </div>

        </div>
        
        
       
             <script>
            const area_grid = document.querySelectorAll(".grid-square");
            const coluna = 10;
            const linha = 8;


            posicao = {
                x : 3,
                y : 2
            };
            direcao = 2;
            filadamain = [];


            function andarBoneco(){
            const pos_atual = posicao.y * coluna + posicao.x;
                if(posicao.y < linha && posicao.x < coluna ){
                const boneco = document.getElementById("boneco");
                    area_grid[pos_atual].appendChild(boneco);
                }
            }

            function andarCima(){
                if(posicao.y > 0){
                    posicao.y--;
                    andarBoneco();
                }
            }
            function andarDireita(){
                if(posicao.x < coluna -1){
                    posicao.x++;
                    andarBoneco();
                }
            }
            function andarBaixo(){
                if(posicao.y < linha -1){
                    posicao.y++;
                    andarBoneco();
                }
            }
            function andarEsquerda(){
                if(posicao.x > 0){
                    posicao.x--;
                    andarBoneco();
                }
            }
             function verDirecao(){
                direcao = direcao%4;

                if(direcao == 0){
                    boneco.style.backgroundImage = "url('cima.png')";
                    
                }
                if(direcao == 1 || direcao == -3){
                    boneco.style.backgroundImage = "url('direita.png')";
                   
                }
                if(direcao == 2 || direcao == -2){
                    boneco.style.backgroundImage = "url(='baixo.png')";
                    
                }
                if(direcao == 3 || direcao == -1){
                    boneco.style.backgroundImage = "url('esquerda.png')";
                    
                }
            }

            function andarDirecao(){
                direcao = direcao%4;

                if(direcao == 0){
                    andarCima();
                }
                if(direcao == 1 || direcao == -3){
                    andarDireita();
                }
                if(direcao == 2 || direcao == -2){
                    andarBaixo();
                }
                if(direcao == 3 || direcao == -1){
                    andarEsquerda();
                }
            }

               function virarDireita(){
                    direcao++;
                    verDirecao();
                }
                function virarEsquerda(){
                    direcao--;
                    verDirecao();
                }   

            window.onload = () => {
                andarBoneco();
            };


            function salvarAcao (funcao){
                filadamain.push(funcao);
                console.log("Ação salva:", funcao.name);
            }
            function executarAcao(){
                
                filadamain.forEach(funcao => funcao());
                filadamain = [];
            }
        </script>
    </main>
</body>
</html>